<div class="max-w-7xl mx-auto p-6 space-y-6">
  <!-- Header -->
  <div class="flex items-center justify-between mb-6">
    <div>
      <h1 class="text-3xl font-bold text-gray-900">Host Live</h1>
      <p class="text-gray-600 mt-1">Track and manage host live sessions</p>
    </div>
  </div>

  <!-- Success Alert -->
  <div *ngIf="showSuccessAlert" class="bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg flex items-center gap-2">
    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
    </svg>
    <span class="font-medium">Live session added successfully!</span>
  </div>

  <!-- Stats Section -->
  <app-card [color]="departmentColor" title="Monthly Overview" icon="ðŸ“Š">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div class="bg-purple-50 rounded-lg p-4">
        <div class="text-sm text-gray-600 mb-1">Current Month</div>
        <div class="text-2xl font-bold" [style.color]="departmentColor">{{ getMonthLabel() }}</div>
      </div>
      <div class="bg-purple-50 rounded-lg p-4">
        <div class="text-sm text-gray-600 mb-1">Total Sessions</div>
        <div class="text-2xl font-bold" [style.color]="departmentColor">{{ totalSessions }}</div>
      </div>
      <div class="bg-purple-50 rounded-lg p-4">
        <div class="text-sm text-gray-600 mb-1">Average Hours/Host</div>
        <div class="text-2xl font-bold" [style.color]="departmentColor">{{ averageHours }}h</div>
      </div>
    </div>
  </app-card>

  <!-- Add Session Form -->
  <app-card [color]="departmentColor" title="Add Live Session" icon="âž•">
    <form (ngSubmit)="addSession()" class="space-y-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Host Selection -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Host</label>
          <select 
            [(ngModel)]="selectedHostId" 
            name="host"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
            required>
            <option value="">Select a host</option>
            <option *ngFor="let host of hosts" [value]="host.id">{{ host.name }}</option>
          </select>
        </div>

        <!-- Date -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Date</label>
          <input 
            type="date" 
            [(ngModel)]="sessionDate" 
            name="date"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
            required>
        </div>

        <!-- Start Time -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Start Time</label>
          <input 
            type="time" 
            [(ngModel)]="startTime" 
            name="startTime"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
            required>
        </div>

        <!-- End Time -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">End Time</label>
          <input 
            type="time" 
            [(ngModel)]="endTime" 
            name="endTime"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
            required>
        </div>
      </div>

      <!-- Duration Display -->
      <div *ngIf="startTime && endTime" class="bg-purple-50 border border-purple-200 rounded-lg p-3">
        <div class="text-sm text-gray-600">Duration:</div>
        <div class="text-lg font-semibold" [style.color]="departmentColor">{{ calculateDuration() }}</div>
      </div>

      <!-- Submit Button -->
      <button 
        type="submit"
        [disabled]="!isFormValid()"
        [class.opacity-50]="!isFormValid()"
        [class.cursor-not-allowed]="!isFormValid()"
        class="w-full px-6 py-3 text-white font-medium rounded-lg transition-colors"
        [style.background-color]="departmentColor">
        Add Session
      </button>
    </form>
  </app-card>

  <!-- Hosts List -->
  <app-card [color]="departmentColor" title="Host Performance" icon="ðŸ‘¥">
    <div class="space-y-4">
      <div *ngFor="let host of hosts" class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
        <div class="flex items-start gap-4">
          <!-- Avatar -->
          <div 
            class="w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg flex-shrink-0"
            [style.background-color]="departmentColor">
            {{ getInitials(host.name) }}
          </div>

          <!-- Info -->
          <div class="flex-1 min-w-0">
            <div class="flex items-center justify-between mb-2">
              <h3 class="text-lg font-semibold text-gray-900">{{ host.name }}</h3>
              <span class="text-sm text-gray-600">
                Target: {{ host.targetHours }}h
              </span>
            </div>

            <!-- Progress Bar -->
            <div class="mb-2">
              <app-progress-bar 
                [progress]="getHostStats(host).percentage" 
                [color]="departmentColor"
                height="12px">
              </app-progress-bar>
            </div>

            <!-- Stats -->
            <div class="flex items-center justify-between text-sm">
              <span class="text-gray-600">
                {{ formatHours(getHostStats(host).totalHours, getHostStats(host).totalMinutes) }} achieved
              </span>
              <span 
                class="font-semibold"
                [style.color]="departmentColor">
                {{ getHostStats(host).percentage }}%
              </span>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="hosts.length === 0" class="text-center py-8 text-gray-500">
        No hosts available
      </div>
    </div>
  </app-card>

  <!-- Monthly Leaderboard -->
  <app-card [color]="departmentColor" title="Monthly Leaderboard" icon="ðŸ†">
    <div class="space-y-3">
      <div *ngFor="let item of leaderboard; let i = index" 
        class="flex items-center gap-4 p-4 rounded-lg transition-all"
        [class.bg-gradient-to-r]="item.rank <= 3"
        [class.from-yellow-50]="item.rank === 1"
        [class.to-yellow-100]="item.rank === 1"
        [class.from-gray-50]="item.rank === 2"
        [class.to-gray-100]="item.rank === 2"
        [class.from-orange-50]="item.rank === 3"
        [class.to-orange-100]="item.rank === 3"
        [class.bg-gray-50]="item.rank > 3">
        
        <!-- Rank -->
        <div class="text-center w-12">
          <div *ngIf="item.rank <= 3" class="text-3xl">{{ getRankBadge(item.rank) }}</div>
          <div *ngIf="item.rank > 3" class="text-xl font-bold text-gray-500">{{ item.rank }}</div>
        </div>

        <!-- Avatar -->
        <div 
          class="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0"
          [style.background-color]="departmentColor">
          {{ getInitials(item.host.name) }}
        </div>

        <!-- Name and Stats -->
        <div class="flex-1 min-w-0">
          <div class="font-semibold text-gray-900">{{ item.host.name }}</div>
          <div class="text-sm text-gray-600">
            {{ formatHours(item.totalHours, item.totalMinutes % 60) }} â€¢ {{ item.percentage }}%
          </div>
        </div>

        <!-- Progress -->
        <div class="w-32 hidden md:block">
          <app-progress-bar 
            [progress]="item.percentage" 
            [color]="departmentColor"
            height="8px">
          </app-progress-bar>
        </div>
      </div>

      <div *ngIf="leaderboard.length === 0" class="text-center py-8 text-gray-500">
        No data available for leaderboard
      </div>
    </div>
  </app-card>
</div>
